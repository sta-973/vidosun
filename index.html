<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="google-site-verification" content="RvYdoR8BfUECZAC7WYGXNk2NCxVuAF2ZrPS4zWlxrDk" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vidosun - Downloader Sosial Media</title>
  <meta name="description" content="Vidosun.com - Unduh video dan audio dari YouTube, TikTok, Instagram, Facebook, dan sosial media lain dengan cepat, aman, dan gratis.">
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/724/724933.png">
  <style>
    :root {
      --bg: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%);
      --text: #fff;
      --card-bg: rgba(255,255,255,0.1);
      --accent: #ffce00;
      --footer-bg: rgba(0,0,0,0.3);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: linear-gradient(135deg, #1e1e1e 0%, #111 100%);
        --text: #e0e0e0;
        --card-bg: rgba(255,255,255,0.05);
        --accent: #ffce00;
        --footer-bg: rgba(255,255,255,0.05);
      }
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      text-align: center;
      transition: background 0.6s ease;
    }

    header {
      padding: 20px 0;
      background: var(--footer-bg);
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      position: sticky;
      top: 0;
      backdrop-filter: blur(6px);
      z-index: 10;
      animation: slideDown 1s ease;
    }

    header h1 {
      font-size: 1.9rem;
      margin-bottom: 5px;
      letter-spacing: 1px;
    }

    nav {
      margin-top: 5px;
    }

    nav a {
      color: var(--text);
      margin: 0 12px;
      text-decoration: none;
      font-weight: 500;
      transition: 0.3s;
    }

    nav a:hover {
      color: var(--accent);
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 30px 15px;
    }

    .container {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 15px;
      width: 100%;
      max-width: 600px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      backdrop-filter: blur(6px);
      animation: fadeIn 1.2s ease;
    }

    h2 {
      margin-bottom: 10px;
    }

    p {
      opacity: 0.9;
      margin-bottom: 15px;
      font-size: 1rem;
    }

    input[type="text"] {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      margin-bottom: 15px;
      outline: none;
    }

    button {
      background: var(--accent);
      color: #000;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
      animation: pulse 2s infinite;
      position: relative;
      overflow: hidden;
    }

    button:hover {
      background: #ffd700;
      transform: scale(1.05);
    }

    /* ✨ Efek cahaya */
    button::after {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.5);
      transform: skewX(-30deg);
    }

    button.active::after {
      animation: shine 1s ease;
    }

    @keyframes shine {
      from { left: -100%; }
      to { left: 200%; }
    }

    section {
      margin-top: 40px;
      background: var(--card-bg);
      padding: 20px;
      border-radius: 12px;
      max-width: 700px;
      animation: fadeIn 1.5s ease;
      text-align: left;
    }

    section h2 {
      margin-bottom: 10px;
      border-left: 5px solid var(--accent);
      padding-left: 10px;
    }

    ol {
      padding-left: 25px;
      line-height: 1.8;
    }

    footer {
      background: var(--footer-bg);
      padding: 15px;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    footer p {
      margin-top: 5px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideDown {
      from { transform: translateY(-40px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255, 206, 0, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(255, 206, 0, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 206, 0, 0); }
    }

    @media (max-width: 600px) {
      header h1 { font-size: 1.4rem; }
      nav a { font-size: 0.9rem; margin: 0 8px; }
      .container { padding: 20px; }
      section { padding: 15px; }
    }
  </style>
</head>

<body>
  <header>
    <h1>Vidosun.com</h1>
    <nav>
      <a href="#">Home</a>
      <a href="#cara">Cara Menggunakan</a>
      <a href="#kontak">Kontak</a>
    </nav>
  </header>

  <main>
    <div class="container">
      <h2>Unduh Video dari Sosial Media</h2>
      <p>Tempel link video di bawah, lalu klik tombol Download.</p>
      <form id="downloadForm">
        <input type="text" id="urlInput" placeholder="Tempel link video di sini..." required>
        <button type="submit" id="downloadBtn">Download</button>
      </form>
    </div>

    <section id="cara">
      <h2>Cara Menggunakan Vidosun</h2>
      <ol>
        <li>Salin link video dari YouTube, TikTok, Instagram, atau Facebook.</li>
        <li>Tempelkan link tersebut ke kolom di atas.</li>
        <li>Klik tombol “Download” dan tunggu video siap diunduh.</li>
      </ol>
    </section>

    <section id="kontak">
      <h2>Kontak & Dukungan</h2>
      <p>Jika ada kendala, kirim pesan ke: <b>support@vidosun.com</b></p>
    </section>
  </main>

  <footer>
    <p>© 2025 Vidosun.com | Dibuat dengan ❤️ oleh womisa2008@gmail.com</p>
  </footer>

  <!-- ✅ Script langsung di HTML -->
 <script>
document.getElementById("downloadForm").addEventListener("submit", async function(e) {
  e.preventDefault();
  const btn = document.getElementById("downloadBtn");
  const url = document.getElementById("urlInput").value.trim();

  if (!url) {
    alert("Masukkan URL video terlebih dahulu!");
    return;
  }

  btn.textContent = "Sedang menyiapkan...";
  btn.disabled = true;

  try {
    // Kirim permintaan download ke backend Flask
    let res = await fetch("/download", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: new URLSearchParams({ url: url, format: "best" })
    });

    let data = await res.json();
    if (data.status === "started") {
      checkProgress(url);
    } else {
      alert("Gagal memulai unduhan: " + data.message);
      btn.textContent = "Download";
      btn.disabled = false;
    }
  } catch (err) {
    alert("Terjadi kesalahan koneksi ke server!");
    btn.textContent = "Download";
    btn.disabled = false;
  }
});

async function checkProgress(url) {
  const btn = document.getElementById("downloadBtn");
  let interval = setInterval(async () => {
    let res = await fetch("/progress?url=" + encodeURIComponent(url));
    let data = await res.json();

    if (data.status === "downloading") {
      btn.textContent = "Mengunduh... " + data.progress + "%";
    } else if (data.status === "done") {
      clearInterval(interval);
      btn.textContent = "Selesai! Klik untuk unduh";
      btn.disabled = false;
      // Ambil file hasil download
      window.location.href = "/getfile";
    } else if (data.status.startsWith("error")) {
      clearInterval(interval);
      alert("Gagal mengunduh: " + data.status);
      btn.textContent = "Download";
      btn.disabled = false;
    }
  }, 3000);
}
</script>
</body>
</html>

